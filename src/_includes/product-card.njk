{# PRODUCT CARD - The Repeatable Vessel #}
{# 
  Usage: {% include "product-card.njk", product: productObject %}
  
  Expected product structure:
  {
    name: string,
    price: number,
    compressed: string (one-breath description),
    liveUrl: string (optional),
    features: array of strings,
    category: "software" | "music" | "bundle"
  }
#}

<div class="product-card">
  
  {# Card Header #}
  <div class="card-header">
    <h3 class="card-title">{{ product.name }}</h3>
    <p class="card-price">{{ product.price | currency }}</p>
  </div>
  
  {# Compressed Description - One Breath #}
  <p class="card-compressed">{{ product.compressed }}</p>
  
  {# Video Walkthrough Embed (if available) #}
  {% if product.videoUrl %}
  <div class="product-video-wrapper">
    <iframe 
      width="100%" 
      height="200" 
      src="https://www.youtube.com/embed/{{ product.videoUrl | replace('https://youtu.be/', '') }}" 
      title="Product Demo Video" 
      frameborder="0" 
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
      allowfullscreen>
    </iframe>
  </div>
  {% endif %}
  
  {# Features - Pattern Recognition #}
  {% if product.features %}
  <ul class="card-features">
    {% for feature in product.features %}
    <li>{{ feature }}</li>
    {% endfor %}
  </ul>
  {% endif %}
  
  {# CTAs - Transformation Points #}
  <div class="card-actions">
    
    {# Live Demo Link (if available) #}
    {% if product.liveUrl %}
    <a href="{{ product.liveUrl }}" target="_blank" rel="noopener noreferrer" class="card-button-secondary">
      Try Live Demo →
    </a>
    {% endif %}
    
    {# Primary CTA - Pre-Sale or Contact #}
    {% if product.stripeUrl %}
    <a href="{{ product.stripeUrl }}" class="cta-button gold-shimmer shine-effect">
      Pre-Order – {{ product.price | currency }}
    </a>
    {% else %}
    <a href="/contact/?product={{ product.name | urlencode }}" class="card-button-primary">
      Get {{ product.name }}
    </a>
    {% endif %}
    
  </div>
  
</div>
